{% extends "loginbase.html" %}

{% block content %}
<div class="card" style="max-width: 520px; margin: 2rem auto;">
    <h1>Create an Account</h1>

    {% if obj and obj.errors %}
        <ul style="color: red;">
            {% for e in obj.errors %}
                <li>{{ e }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% set row = (obj.data[0] if obj and obj.data else {}) %}

    <form action="{{ url_for('sign_up') }}" method="POST">
        <label>User ID (username):</label>
        <input type="text" name="userID"
               value="{{ row.get('userID','') }}" required>

        <label>First Name:</label>
        <input type="text" name="Fname"
               value="{{ row.get('Fname','') }}" required>

        <label>Last Name:</label>
        <input type="text" name="Lname"
               value="{{ row.get('Lname','') }}" required>

        <label>Email:</label>
        <input type="email" name="email"
               value="{{ row.get('email','') }}" required>

        <label>Country:</label>
        <input type="text" name="country"
               value="{{ row.get('country','') }}" required>

        <label>Date of Birth:</label>
        <input type="date" name="DOB"
               value="{{ row.get('DOB','') }}" required>

        <label>Rating:</label>
        <input type="number" name="rating"
               value="{{ row.get('rating','1200') }}" required>

        <label>Title:</label>
        <select name="title">
            {% set current_title = row.get('title','') %}
            <option value="" {% if current_title == '' %}selected{% endif %}>None</option>
            <option value="GM"  {% if current_title == 'GM' %}selected{% endif %}>GM</option>
            <option value="IM"  {% if current_title == 'IM' %}selected{% endif %}>IM</option>
            <option value="FM"  {% if current_title == 'FM' %}selected{% endif %}>FM</option>
            <option value="CM"  {% if current_title == 'CM' %}selected{% endif %}>CM</option>
            <option value="WGM" {% if current_title == 'WGM' %}selected{% endif %}>WGM</option>
            <option value="WIM" {% if current_title == 'WIM' %}selected{% endif %}>WIM</option>
            <option value="WFM" {% if current_title == 'WFM' %}selected{% endif %}>WFM</option>
        </select>

        <label>Password:</label>
        <input type="password" name="password" required>

        <label>Confirm Password:</label>
        <input type="password" name="password2" required>

        <!-- role is always player; handled server-side -->
        <button type="submit" class="btn-primary" style="margin-top: 1rem;">
            Sign Up
        </button>
    </form>

    <p style="margin-top: 1rem;">
        Already have an account?
        <a href="{{ url_for('login') }}">Log in here</a>.
    </p>
</div>
{% endblock %}
